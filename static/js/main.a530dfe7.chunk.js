(window.webpackJsonpmehjong=window.webpackJsonpmehjong||[]).push([[0],{37:function(e,t,a){},53:function(e,t,a){e.exports=a(95)},58:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),l=(a(58),a(8)),i=a(10),c=a(12),u=a(11),m=a(13),p=a(34),h=a(20),d=a(52),g=r.a.createContext(null),f=function(e){return function(t){return r.a.createElement(g.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},b=g,y=(a(59),a(23)),v=a.n(y),E=(a(67),a(68),a(69),{apiKey:"AIzaSyCO_RWmCtS4iiq6JmAryC1B7NRfZkymS1A",authDomain:"authentication-template-f0be0.firebaseapp.com",databaseURL:"https://authentication-template-f0be0.firebaseio.com",projectId:"authentication-template-f0be0",storageBucket:"authentication-template-f0be0.appspot.com",messagingSenderId:"249217897473"}),S=function e(){var t=this;Object(l.a)(this,e),this.playerName=function(e){return t.db.ref("mehjong/playerNames/".concat(e))},this.playerData=function(e){return t.db.ref("mehjong/playerDatas/".concat(e))},this.session=function(e){return t.db.ref("mehjong/sessions/".concat(e))},this.playerNames=function(){return t.db.ref("mehjong/playerNames")},this.playerDatas=function(){return t.db.ref("mehjong/playerDatas")},this.sessions=function(){return t.db.ref("mehjong/sessions")},this.user=function(e){return t.db.ref("users/".concat(e))},this.bobaShopUserReview=function(e,a){return t.db.ref("bobaShopUserReviews/".concat(e,"/").concat(a))},this.bobaShopUserComment=function(e,a){return t.db.ref("bobaShopUserReviews/".concat(e,"/").concat(a,"/comments"))},this.userReview=function(e,a){return t.db.ref("users/".concat(e,"/reviews/").concat(a))},this.userReviewComment=function(e,a){return t.db.ref("users/".concat(e,"/reviews/").concat(a,"/comments"))},this.bobaShop=function(e){return t.db.ref("bobaShops/".concat(e))},this.location=function(e){return t.db.ref("locations/".concat(e))},this.userReviewLastVisit=function(e){return t.db.ref("users/".concat(e,"/reviewsLastVisit"))},this.bobaShopReviews=function(){return t.db.ref("bobaShopUserReviews")},this.bobaShopUserReviews=function(e){return t.db.ref("bobaShopUserReviews/".concat(e))},this.userReviews=function(e){return t.db.ref("users/".concat(e,"/reviews"))},this.users=function(){return t.db.ref("users")},this.bobaShops=function(){return t.db.ref("bobaShops")},this.locations=function(){return t.db.ref("locations")},this.reviewDateTimes=function(){return t.db.ref("reviewDateTimes")},this.bobaShopImages=function(e){return t.db.ref("bobaShops/".concat(e,"/images"))},this.bobaShopImage=function(e,a){return t.db.ref("bobaShops/".concat(e,"/images/").concat(a))},this.userImages=function(e){return t.db.ref("users/".concat(e,"/images"))},this.userImage=function(e,a){return t.db.ref("users/".concat(e,"/images/").concat(a))},this.images=function(){return t.db.ref("images")},this.image=function(e){return t.db.ref("images/".concat(e))},this.storageBobaShopImages=function(e){return t.storage.ref("bobaShops/".concat(e,"/images"))},this.storageBobaShopImage=function(e,a){return t.storage.ref("bobaShops/".concat(e,"/images/").concat(a))},v.a.initializeApp(E),this.auth=v.a.auth(),this.db=v.a.database(),this.storage=v.a.storage()},O=a(99),N=a(98),P=[["Sessions","/sessions"]],j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).setNavExpanded=function(e){a.setState({navExpanded:e}),document.addEventListener("click",a.handleDocumentClick,!0)},a.closeNav=function(){a.setState({navExpanded:!1}),document.removeEventListener("click",a.handleDocumentClick,!0)},a.handleDocumentClick=function(e){var t=a._element;e.target===t||t.contains(e.target)||a.closeNav()},a.state={navExpanded:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){return e._element=t}},r.a.createElement(O.a,{collapseOnSelect:!0,expand:"md",bg:"light",variant:"light",fixed:"top",onToggle:this.setNavExpanded,expanded:this.state.navExpanded},r.a.createElement(O.a.Brand,{onClick:this.closeNav,href:"#/"},"Meh"),r.a.createElement(O.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(O.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(N.a,{className:"mr-auto"},P.map(function(t){var a=Object(d.a)(t,2),n=a[0],o=a[1];return r.a.createElement(N.a.Link,{href:"#"+o,key:n,className:e.props.location.pathname===o?"activated":""},n)})))))}}]),t}(r.a.Component),w=Object(h.e)(f(j)),C=a(14),k=.25;function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var x=f(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).sortPlayerData=function(e){var t=[];for(var n in e){var r=0,o=0,s=n;for(var l in e[n]){var i=e[n][l];r+=i.score,i.score>0&&(o+=i.score)}var c={name:s,totalScore:r,totalExp:o,totalMoney:r*k};t.push(c)}t.sort(function(e,t){return new Date(t.totalScore)-new Date(e.totalScore)}),a.setState({playersRankInfo:t})},a.state={playersRankInfo:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("123"),this.props.firebase.playerDatas().once("value").then(function(t){if(t.val()){console.log(t.val());var a=Object.keys(t.val()).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){Object(C.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({name:e},t.val()[e])});console.log(a),e.sortPlayerData(t.val())}})}},{key:"render",value:function(){var e=this.state.playersRankInfo;return console.log(e),r.a.createElement("div",null,"landing",r.a.createElement("table",{className:"table",style:{maxWidth:"0%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Score"),r.a.createElement("td",null,"Money"),r.a.createElement("td",null,"Exp"))),r.a.createElement("tbody",null,e.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.totalScore),r.a.createElement("td",null,e.totalMoney>0?"$"+e.totalMoney:"-$"+-1*e.totalMoney),r.a.createElement("td",null,e.totalExp))}))))}}]),t}(n.Component)),I=a(37),R=a.n(I),A=a(51),M=a.n(A),T=(a(93),[]),V=function(e){var t=e.trim().toLowerCase(),a=t.length;return 0===a?T:T.filter(function(e){return e.name.toLowerCase().slice(0,a)===t})},L=function(e){return e.name},U=function(e){return r.a.createElement("div",null,e.name)},B=f(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n=t.newValue;a.setState({value:n}),a.props.getInputData(n,a.state.playerProp)},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:V(t)})},a.onSuggestionSelected=function(e,t){t.suggestion;var n=t.suggestionValue;t.suggestionIndex,t.sectionIndex,t.method;a.props.getSelectedData(n,a.state.playerProp)},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.state={value:a.props.playerName,suggestions:[],playerProp:a.props.playerProp},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.playerNames().once("value").then(function(e){if(e.val()){var t=Object.keys(e.val()).map(function(e){return{name:e}});console.log(t),T=t}})}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.playerName})}},{key:"componentWillUnmount",value:function(){this.props.firebase.playerNames().off()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:this.props.placeholder?this.props.placeholder:"Player name",value:t,onChange:this.onChange};return r.a.createElement(M.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionSelected:this.onSuggestionSelected,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:L,renderSuggestion:U,inputProps:n,highlightFirstSuggestion:!0})}}]),t}(r.a.Component)),W=f(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleContainerClick=function(e){},a.onChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.getAutosuggestInput=function(e,t){a.setState(Object(C.a)({},t,e))},a.getAutoSuggestSelected=function(e,t){a.setState(Object(C.a)({},t,e))},a.node=r.a.createRef(),a.state=e.formValues,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e.formValues)}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=this.state,a=t.startingPoints,n=t.note,o=t.error,s=t.player1Name,l=t.player2Name,i=t.player3Name,c=t.player4Name,u=t.player1Points,m=t.player2Points,p=t.player3Points,h=t.player4Points,d={};d[s]=!0,d[l]=!0,d[i]=!0,d[c]=!0;var g=!(4===Object.keys(d).length)||""===a||""===s||""===l||""===i||""===c||""===u||""===m||""===p||""===h;return r.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto",backgroundColor:"rgba(0,0,0,0.1)",padding:"40px 20px"},onClick:this.handleContainerClick},r.a.createElement("div",{ref:function(t){return e.node=t}},r.a.createElement("div",{className:"modal-content",style:{maxWidth:"700px"}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"New"),r.a.createElement("button",{type:"button",className:"close",onClick:this.props.toggleModal,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",null,"starting points"),r.a.createElement("input",{type:"number",name:"startingPoints",value:a,onChange:this.onChange})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},"Player"),r.a.createElement("div",{className:"col-xs-6"},"Points")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement(B,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,playerName:s,playerProp:"player1Name",placeholder:"Player 1"})),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("input",{type:"number",name:"player1Points",placeholder:"Player 1",value:u,onChange:this.onChange,className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement(B,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,playerName:l,playerProp:"player2Name",placeholder:"Player 2"})),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("input",{type:"number",name:"player2Points",placeholder:"Player 2",value:m,onChange:this.onChange,className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement(B,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,playerName:i,playerProp:"player3Name",placeholder:"Player3"})),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("input",{type:"number",name:"player3Points",placeholder:"Player 3",value:p,onChange:this.onChange,className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement(B,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,playerName:c,playerProp:"player4Name",placeholder:"Player 4"})),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("input",{type:"number",name:"player4Points",placeholder:"Player 4",value:h,onChange:this.onChange,className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("textarea",{type:"text",name:"note",placeholder:"Note",value:n,onChange:this.onChange,className:"form-control ".concat(R.a.textarea)}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"btn btn-primary ".concat(R.a.submitButton),disabled:g,onClick:function(){return e.props.submitSession(e.state)}},"Add session"),o&&r.a.createElement("p",null,o.message)))))}}]),t}(r.a.Component));function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var F={startingPoints:40,note:"",error:"",player1Name:"",player2Name:"",player3Name:"",player4Name:"",player1Points:"",player2Points:"",player3Points:"",player4Points:""},J=f(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleModal=function(){console.log("toggle"),a.setState({modalIsOpen:!a.state.modalIsOpen})},a.getSessions=function(){a.props.firebase.sessions().on("value",function(e){if(e.val()){var t=Object.keys(e.val()).map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach(function(t){Object(C.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({id:t},e.val()[t])});t.sort(function(e,t){return new Date(t.dateTime)-new Date(e.dateTime)}),a.setState({sessions:t})}})},a.newSession=function(){a.setState({formValues:F},function(){a.toggleModal()})},a.submitSession=function(e){var t,n=e.startingPoints,r=e.note,o=e.player1Name,s=e.player2Name,l=e.player3Name,i=e.player4Name,c=parseInt(e.player1Points),u=parseInt(e.player2Points),m=parseInt(e.player3Points),p=parseInt(e.player4Points),h=(new Date).toLocaleString(),d=c-n,g=u-n,f=m-n,b=p-n;console.log(n,r,o,s,l,i,c,u,m,p),a.props.firebase.playerNames().update((t={},Object(C.a)(t,o,o),Object(C.a)(t,s,s),Object(C.a)(t,l,l),Object(C.a)(t,i,i),t)).catch(function(e){a.setState({error:e})}),a.props.firebase.sessions().push({startingPoints:n,note:r,dateTime:h,player1Points:c,player2Points:u,player3Points:m,player4Points:p,player1Name:o,player2Name:s,player3Name:l,player4Name:i}).then(function(e){var t=e.key;a.props.firebase.playerData(o).child(t).set({dateTime:h,startingPoints:n,points:c,score:d}),a.props.firebase.playerData(s).child(t).set({dateTime:h,startingPoints:n,points:u,score:g}),a.props.firebase.playerData(l).child(t).set({dateTime:h,startingPoints:n,points:m,score:f}),a.props.firebase.playerData(i).child(t).set({dateTime:h,startingPoints:n,points:p,score:b})}).catch(function(e){a.setState({error:e})}),a.toggleModal()},a.state={modalIsOpen:!1,formValues:F,sessions:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getSessions()}},{key:"render",value:function(){var e=this.state.sessions;return console.log(e),r.a.createElement("div",null,r.a.createElement("h5",null,"sessions"),r.a.createElement("button",{onClick:this.newSession,className:"btn btn-primary",style:{marginLeft:"20px"}},"new"),e.map(function(e,t){return r.a.createElement("div",{key:t,className:"card card-body bg-light",style:{margin:20}},r.a.createElement("div",null,"Players: ",e.player1Name,", ",e.player2Name,", ",e.player3Name,", ",e.player4Name," "),r.a.createElement("div",null,"Points: ",e.player1Points,", ",e.player2Points,", ",e.player3Points,", ",e.player4Points," "))}),r.a.createElement(W,{show:this.state.modalIsOpen,formValues:this.state.formValues,toggleModal:this.toggleModal,submitSession:this.submitSession}))}}]),t}(n.Component)),$=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(w,{forwardRef:function(t){return e.node=t}}),r.a.createElement("hr",null)),r.a.createElement("div",{onClick:this.handleContainerClick},r.a.createElement(h.a,{exact:!0,path:"/",component:x}),r.a.createElement(h.a,{exact:!0,path:"/sessions",component:J}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(94);s.a.render(r.a.createElement(b.Provider,{value:new S},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.a530dfe7.chunk.js.map